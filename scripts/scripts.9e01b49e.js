"use strict";angular.module("spheresortApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/demo.html",controller:"DemoCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("spheresortApp").controller("DemoCtrl",["$scope","$window","spheresort",function(a,b,c){a.spheresort=c.instance({force:0,equalize:!0,rate:.1}),a.length=160,a.data=new Array(a.length),a.materials=new Array(a.length);var d,e,f,g;for(d=a.length;d-->0;)e=360*Math.random(),f=g=Math.random(),a.data[d]=b.d3.hsl(e,f,g);for(a.materials=new Array(a.length),d=a.length;d-->0;)a.materials[d]=new b.THREE.MeshBasicMaterial({color:parseInt(a.data[d].toString().substring(1),16),opacity:.9,transparent:!0});a.spheresort.data(a.data,function(a,b){var c=Math.abs(a.h-b.h)/180,d=a.s-b.s,e=a.l-b.l;c>1&&(c=2-c);var f=Math.sqrt((c*c+d*d+e*e)/3);return f})}]),angular.module("spheresortApp").controller("AboutCtrl",["$scope",function(a){a.fake=42}]),angular.module("spheresortApp").directive("threeContainer",["$window",function(a){return{restrict:"A",link:function(b,c,d){var e,f=d.ratio||4/3,g=d.shape||"sphere",h=c.innerWidth(),i=h/f;for(b.three={scene:new a.THREE.Scene,camera:new a.THREE.PerspectiveCamera(50,f,.01,4),renderer:new a.THREE.WebGLRenderer,geometry:"cube"===g.toLowerCase()?new a.THREE.BoxGeometry(.1,.1,.1):new a.THREE.SphereGeometry(.1,32,32),objects:new a.THREE.Group},b.three.camera.position.set(0,0,5),b.three.objects.position.set(0,0,2),b.three.renderer.setSize(h,i),angular.extend(b.three.renderer,{autoClear:!0,antialias:!0}),b.three.renderer.setClearColor(16777215),b.three.scene.fog=new a.THREE.FogExp2(16777215,.1),b.three.scene.add(b.three.objects),c.innerHeight(i),c.append(b.three.renderer.domElement),e=0;e<b.length;e++){var j=new a.THREE.Mesh(b.three.geometry,b.materials[e]);j.position.set.apply(j.position,b.spheresort.positions[e]),b.three.objects.add(j)}var k=-1,l=function(){for((0>k||k-->0)&&requestAnimationFrame(l),b.spheresort.sort(),e=b.length;e-->0;){var a=b.three.objects.children[e];a.position.set.apply(a.position,b.spheresort.positions[e])}b.three.objects.rotation.y+=.005,b.three.renderer.render(b.three.scene,b.three.camera)};l()}}}]),angular.module("spheresortApp").service("spheresort",["$window",function(a){this.instance=a.spheresort}]),angular.module("spheresortApp").controller("HeaderCtrl",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]);